<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <link rel="stylesheet" type="text/css" th:href="@{/css/main.css}"/>
    <link rel="stylesheet" href="/js/bootstrap-4.3.1/css/bootstrap.min.css">
    <script charset="utf-8" src="/js/jquery-3.4.1.min.js"></script>
    <script charset="utf-8" src="/js/ueditor/ueditor.config.js"></script>
    <script charset="utf-8" src="/js/ueditor/ueditor.all.js"></script>
    <script charset="utf-8" src="/js/ueditor/lang/zh-cn/zh-cn.js"></script>
    <script type="text/javascript">
        //实例化编辑器
        //建议使用工厂方法getEditor创建和引用编辑器实例，如果在某个闭包下引用该编辑器，直接调用UE.getEditor('editor')就能拿到相关的实例
        var ue = UE.getEditor('editor');
        var content = ue.getContent();

        function save() {
            $.ajax({
                type: "POST",
                url: "/ueditor/save",
                data: {
                    "title": $("#title").val(), "content": content, "id": $("#id").val()
                },
                async: false,
                error: function (request) {
                    alert("提交出错 error");
                },
                success: function (data) {
                    alert("success");
                }
            });
        }

        function ftlExport() {
            window.open("/ueditor/ftlExport/1");
        }

        function downloadFile() {
            window.open("/ueditor/downloadFile");
        }
    </script>
</head>
<body>
<div th:replace="fragments/header :: header"></div>
<div class="container">
    <div class="starter-template">
        <h1>文档导出</h1>
        <div class="btn-toolbar mb-3" role="toolbar" >
            <div class="input-group">
                <div class="input-group-prepend">
                    <span class="input-group-text">id</span>
                </div>
                <input type="text" class="form-control" placeholder="id" aria-label="id">
            </div>
            <div class="input-group">
                <div class="input-group-prepend">
                    <span class="input-group-text">title</span>
                </div>
                <input type="text" class="form-control" placeholder="title" aria-label="title">
            </div>
            <div class="btn-group">
                <button type="button" class="btn btn-secondary" onclick="save()">保存</button>
                <button type="button" class="btn btn-secondary" onclick="ftlExport()">导出</button>
                <button type="button" class="btn btn-secondary" onclick="downloadFile()">下载</button>
            </div>
        </div>
        <div>
            <script id="editor" type="text/plain" style="width:800px;height:300px;"></script>
        </div>
        <div class="input-group mb-3">
            <input type="text" class="form-control" placeholder="aa" aria-label="aa">
        </div>
    </div>
</div>
<div th:replace="fragments/footer :: footer"></div>
</body>
</html>
